---
title: C++ Primer Plus-第8章 函数探幽
date: 2022-10-16 20:07:00 +0800
categories: [C++, C++ Primer Plus]
tags: [学习笔记]

pin: false
author: 
    name: CALL1CE
    link: https://space.bilibili.com/9330604
toc: true
comments: true
math: true
mermaid: true

---



## 8.1 C++内联函数

- 内联函数是C++为提高程序运行速度所做的一项改进。常规函数和内联函数之间的主要区别不在手编写方式，而在于C++编译器如何将它们组合到程序中

- 编译过程的最终产品是可执行程序——由一组机器语言指令组成，运行程序时，操作系统将这些指令载入到计算机内存中，因此每条指令都有特定的内存地址

- 常规函数调用使程跳到另一个地址（函数的地址），并在函数结束时返回
  
  - 执行到函数调用指令时，程序将在函数调用后立即存储该指令的内存地址
  
  - 并将函数参数复制到堆栈
  
  - 跳到标记函数起点的内存单元，执行函数代码（也许还需要将返回值放入寄存器中）
  
  - 跳回到地址被保存的指令处
    
    > 来回跳跃需要一定的开销

- 内联函数的编译代码与其他程序代码“内联”起来了，也就是说编译器将使用相应的函数代码替换函数调用，不需要跳跃，因此更快，但代价是占用更多内存

- 如果执行函数代码的时间比处理函数调用机制的时间长，则节省的时间将只占整个过程的很小一部分。如果代码执行时间很短，则内联调用就可节省非内联调用使用的大部分时间

- 使用内联函数：
  
  - 在函数声明前加上关键字inline
  
  - 在函数定义前加上关键字inline

- 通常做法是省略原型，将整个定义放在本应提供原型的地方

- **内联函数不能递归**

- inline是C++新增的特性，C语言使用#define来提供宏（但宏不能按值传递）

## 8.2 引用变量

## 8.3 默认参数

## 8.4 函数重载

## 8.5 函数模板
