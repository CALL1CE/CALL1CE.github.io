---
title: C++ Primer Plus-第4章 复合类型
date: 2022-10-09 17:25:00 +0800
categories: [C++, C++ Primer Plus]
tags: [学习笔记]

pin: false
author: 
    name: CALL1CE
    link: https://space.bilibili.com/9330604
toc: true
comments: true
math: true
mermaid: true

---

    今天看了看复合类型，并不难，我发现每天看完C++都比前一天晚一会，今天快五点半才看完，昨天看到5点。而且这几天都没看games101了TWT，昨晚打了一晚上三国杀，但当内奸赢了一把很爽就是了。

    第四章比较长，分两天看完吧。

## 4.1 数组

- `sizeof`**运算符**返回类型或数据对象的长度（单位为字节）。用于数组名，得到的是整个数组的字节数，用于数组元素，则是元素的长度

- {}初始化
  
  - {}初始化列表只能用于数组初始化，不能用于后续赋值
  
  - 如果使用{}初始化数组的一部分，那么编译器会把其他元素设置为0
  
  - c++11使用{}：
    
    - 可以省略`=`
    
    - {}不包含内容，则所有元素设置为0
    
    - 列表初始化禁止缩窄转换

## 4.2 字符串

- C++两种处理字符串方式：C风格字符串、string类库

- C风格字符串：
  
  - 存储在char数组中
  
  - 以空字符结尾，`\0`，ASCII码为0

- 可以用字符串常量来初始化char数组，比如`"abc"`，`\0`会自动加到结尾，如果还有空余位置，会自动设置为`\0`

- 有时候，字符串很长，无法放到一行中。C++允许拼接字符串字面值，即将两个用引号括起的字符串合并为一个。事实上，任何两个由空白（空格、制表符和换行符）分隔的字符串常量都将自动拼接成一个。

- 面向行的输入：

- getline()，通过回车键输入的换行符来确定输入结尾
  
  - `cin.getline(name,20)`数组名，要读取的字符数（最多读取的数目，数组其余位置添加空字符）

- get()，与getline相似，唯一的不同是不再读取并丢弃换行符，而是留在输入队列中，所以需要额外使用一次get()来吸收换行符
  
  - `cin.get(name,20)`

- 可以连续get或getline（因为函数会返回一个cin对象）
  
  - cin.get(name,20).get();//有点酷，因为外行可能看不懂哈哈

- get的优点：
  
  - get使输入更精准，使用get可以知道停止读取的原因是由于读取了整行还是已经填满，只需要查看下一个输入字符是否为换行符。但getline因为会自动吸收换行符，所以无论如何，下一个输入字符都不会是换行符

- 空行问题，cin读取字符串后，会把回车键生成的换行符留在输入队列，导致后面的getline或者get会认为是一个空行，所以会把空字符串赋给数组

## 4.3 string类简介

- 使用string类时，某些操作比数组简单：
  
  - 不能将一个数组赋给另一个数组，但可以将一个string对象赋给另一个string对象
  
  - 简化字符串合并，使用`+`

- getline的不同用法：
  
  - `cin.getline(charr,10)`函数时istream类的一个类方法（cin是istream的一个对象）
  
  - `getline(cin,str)`，string的用法，说明函数不是类方法

- 其他形式字符串字面值：wchar_t、char16_t、char32_t，C++分别使用前缀L、u、U来表示
  
  ```cpp
  wchar_t title[] = L"abc def";
  ```

- C+11还支持Unicode字符编码方案UTF-8。:在这种方案中，根据编码的数字值，字符可能存储为1~4个八位组。C++使用前缀u8来表示这种类型的字符串字面值。

- C++11新增的另一种类型是原始(raw)字符串。在原始字符串中，字符表示的就是自己。
  
  ```cpp
  cout<<R"(Jim"King" Tutt uses "\n" instead of endl.)"
  ```
  
  - 输入原始字符串时，按回车键不仅会移到下一行，还将在原始字符串中添加回车字符。
  
  - 如果想打印`)"`呢？只需要在`"`和`(`之间添加其他字符，当然结尾处也要加，相当于使用新的一个字符串来表示开头和结尾，比如`R"+*(`表示开头，`)+*"`表示结束

## 4.4 结构简介

- 结构是C++OOP堡垒（类）的基石

- C++11结构使用{}初始化
  
  - 等号可选
  
  - 不包含内容则所有成员设置成0
  
  - 不允许缩窄

- 可以使用赋值运算符`=`将结构赋给另一个同类型的结构

## 4.5 共用体

- 共用体(union)是一种数据格式，它能够存储不同的数据类型，但**只能同时**存储其中的一种类型。也就是说：结构可以同时存储int、long和double，共用体只能存储int、long或double。所以，共用体的长度为其最大成员的长度

- 用途之一：当数据项使用两种或更多种格式（但不会同时使用）时，可节省空间。

- 匿名共用体(anonymous union)没有名称，其成员将成为位于相同地址处的变量。显然，每次只有二个成员是当前的成员

- 共用体通常用于（但并非只能用于）节省内存

## 4.6 枚举

## 4.7 指针和自由存储空间

## 4.8 针指、数组和指针算术

## 4.9 类型组合

## 4.10 数组的替代品
