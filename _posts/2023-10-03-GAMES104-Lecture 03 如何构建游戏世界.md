---
title: GAMES104-Lecture 03 如何构建游戏世界
date: 2023-10-03 14:53:00 +0800
categories: [Computer Graphics, GAMES104]
tags: [图形学, 学习笔记]

pin: false
author: 
    name: CALL1CE
    link: https://space.bilibili.com/9330604
toc: true
comments: true
math: true
mermaid: true

---

## What does a game world consist of?

* 动态物

* 静态物

* 环境：天空、植被、地形

* 其他物：空气墙、trigger area、navigation mesh

[![pPOiHUA.jpg](https://z1.ax1x.com/2023/10/03/pPOiHUA.jpg)](https://imgse.com/i/pPOiHUA)

## How should we describe these things?

* 属性

* 行为

* 继承

[![pPOi7Ed.jpg](https://z1.ax1x.com/2023/10/03/pPOi7Ed.jpg)](https://imgse.com/i/pPOi7Ed)

* 组件化：解决该继承谁的问题
  
  * 让开发者好理解好维护
  
  * 让艺术家好理解好使用

[![pPOiLCt.jpg](https://z1.ax1x.com/2023/10/03/pPOiLCt.jpg)](https://imgse.com/i/pPOiLCt)

* 把游戏世界的所有东西抽象成了game object（go）

* 每个go由各种组件（component）组成

## How are these things organized?

* 每个tick()把每个go的tick()执行一遍

* 现代引擎中是按系统（或者说是每种component）去tick()，有一个pipeline

[![pPOib4I.jpg](https://z1.ax1x.com/2023/10/03/pPOib4I.jpg)](https://imgse.com/i/pPOib4I)

* go之间的关系，最原始是hardCode，现代是Events事件机制（观察者模式）

* Events：发送事件给有关系的go，让go自己处理

[![pPOioHH.jpg](https://z1.ax1x.com/2023/10/03/pPOioHH.jpg)](https://imgse.com/i/pPOioHH)

* 管理：
  
  * 不管理：每次发生爆炸，向所有go发送消息，判断爆炸半径
  
  * 分治：把世界划分成格子，均匀格子、八叉树格子（层级查找）
  
  * 空间数据管理： 二叉树、八叉树、BVH

[![pPOiO8P.jpg](https://z1.ax1x.com/2023/10/03/pPOiO8P.jpg)](https://imgse.com/i/pPOiO8P)

* 很多tick是并行执行的，所以时序很重要，如果让go彼此互相通信，就会产生逻辑混乱，因此引入邮局

[![pPOiXgf.jpg](https://z1.ax1x.com/2023/10/03/pPOiXgf.jpg)](https://imgse.com/i/pPOiXgf)

* pretick和posttick就是解决时序问题
